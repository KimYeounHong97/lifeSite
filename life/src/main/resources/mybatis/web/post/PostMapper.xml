<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.life.site.web.post.PostMapper">
 	<select id="selectPickPostList" parameterType="map" resultType="hashmap">
       <![CDATA[
            
		SELECT *		/* post.PostMapper.selectPickPostList */
		FROM(SELECT    
		           		 @num:=@num+1 AS NUM , T.*
				 FROM(
						SELECT 
											    'animals' as TYPE,
												POST_ID,
										        TITLE,
										        CONTENT,
										        REG_USER_ID,
										        REG_DT,
										        MOD_USER_ID,
										        MOD_DT
						FROM xorjf22.animals a
						WHERE DEL_FLG = 'N'
		                AND POST_PICK = 'Y'
		                UNION ALL 
		                SELECT  
											    'arts-entertainment' as TYPE,
												POST_ID,
										        TITLE,
										        CONTENT,
										        REG_USER_ID,
										        REG_DT,
										        MOD_USER_ID,
										        MOD_DT
						FROM xorjf22.artentertainment b
						WHERE DEL_FLG = 'N'
		                AND POST_PICK = 'Y'
		                UNION ALL 
		                SELECT  
											    'destinations' as TYPE,
												POST_ID,
										        TITLE,
										        CONTENT,
										        REG_USER_ID,
										        REG_DT,
										        MOD_USER_ID,
										        MOD_DT
						FROM xorjf22.destinations c
						WHERE DEL_FLG = 'N'
		                AND POST_PICK = 'Y'
		                 UNION ALL 
		                SELECT  
											    'history' as TYPE,
												POST_ID,
										        TITLE,
										        CONTENT,
										        REG_USER_ID,
										        REG_DT,
										        MOD_USER_ID,
										        MOD_DT
						FROM xorjf22.history d
						WHERE DEL_FLG = 'N'
		                AND POST_PICK = 'Y'
		                 UNION ALL 
		                SELECT  
											    'lifeStyle' as TYPE,
												POST_ID,
										        TITLE,
										        CONTENT,
										        REG_USER_ID,
										        REG_DT,
										        MOD_USER_ID,
										        MOD_DT
						FROM xorjf22.lifestyle e
						WHERE DEL_FLG = 'N'
		                AND POST_PICK = 'Y'
		                 UNION ALL 
		                SELECT  
											    'nature' as TYPE,
												POST_ID,
										        TITLE,
										        CONTENT,
										        REG_USER_ID,
										        REG_DT,
										        MOD_USER_ID,
										        MOD_DT
						FROM xorjf22.nature f
						WHERE DEL_FLG = 'N'
		                AND POST_PICK = 'Y'
		                UNION ALL 
		                SELECT  
											    'people' as TYPE,
												POST_ID,
										        TITLE,
										        CONTENT,
										        REG_USER_ID,
										        REG_DT,
										        MOD_USER_ID,
										        MOD_DT
						FROM xorjf22.people g
						WHERE DEL_FLG = 'N'
		                AND POST_PICK = 'Y'
						ORDER BY MOD_DT DESC
					) T ,(SELECT @num:=0) AS n) TT1
		            WHERE  NUM >=1 AND NUM <=6]]>
    </select>
    <select id="selectPostAnimalList" parameterType="map" resultType="hashmap">
       <![CDATA[
         SELECT      /* post.PostMapper.selectPostAnimalList */
           		T.*,
           		(SELECT COUNT(*) FROM xorjf22.animals) AS TOTAL_COUNT
		 FROM(
				SELECT  @num:=@num+1 AS NUM,
										'animals' as TYPE,
										POST_ID,
								        TITLE,
								        CONTENT,
								        REG_USER_ID,
								        REG_DT,
								        MOD_USER_ID,
								        MOD_DT
				FROM (SELECT @num:=0) AS n,  xorjf22.animals a
				WHERE DEL_FLG = 'N'
				ORDER BY POST_ID DESC
			) T
		WHERE 1=1]]>
		<choose>
			<when test='morePostYn!=null and morePostYn.equals("Y")' >
				<![CDATA[
						AND NUM >=1
						AND NUM <=6
				]]>
			</when>
			<otherwise>
				 <![CDATA[
						AND NUM >=1+((#{currentPage} - 1) * 12) 
						AND NUM <=12+((#{currentPage} - 1) * 12)
				]]>
			</otherwise>
		</choose>
    </select>
    
    <select id="selectPostArtEntertainmentList" parameterType="map" resultType="hashmap">
       <![CDATA[
         SELECT      /* post.PostMapper.selectPostartentertainmentList */
           		T.*,
           		(SELECT COUNT(*) FROM xorjf22.artentertainment) AS TOTAL_COUNT
		 FROM(
				SELECT  @num:=@num+1 AS NUM,
										'arts-entertainment' as TYPE,
										POST_ID,
								        TITLE,
								        CONTENT,
								        REG_USER_ID,
								        REG_DT,
								        MOD_USER_ID,
								        MOD_DT
				FROM (SELECT @num:=0) AS n,  xorjf22.artentertainment a
				WHERE DEL_FLG = 'N'
				ORDER BY POST_ID DESC
			) T
		WHERE 1=1]]>
		<choose>
			<when test='morePostYn!=null and morePostYn.equals("Y")' >
				<![CDATA[
						AND NUM >=1
						AND NUM <=6
				]]>
			</when>
			<otherwise>
				 <![CDATA[
						AND NUM >=1+((#{currentPage} - 1) * 12) 
						AND NUM <=12+((#{currentPage} - 1) * 12)
				]]>
			</otherwise>
		</choose>
    </select>
    
     <select id="selectPostDestinationsList" parameterType="map" resultType="hashmap">
       <![CDATA[
         SELECT      /* post.PostMapper.selectPostDestinationsList */
           		T.*,
           		(SELECT COUNT(*) FROM xorjf22.people) AS TOTAL_COUNT
		 FROM(
				SELECT  @num:=@num+1 AS NUM,
										'destinations' as TYPE,
										POST_ID,
								        TITLE,
								        CONTENT,
								        REG_USER_ID,
								        REG_DT,
								        MOD_USER_ID,
								        MOD_DT
				FROM (SELECT @num:=0) AS n,  xorjf22.destinations a
				WHERE DEL_FLG = 'N'
				ORDER BY POST_ID DESC
			) T
		WHERE 1=1]]>
		<choose>
			<when test='morePostYn!=null and morePostYn.equals("Y")' >
				<![CDATA[
						AND NUM >=1
						AND NUM <=6
				]]>
			</when>
			<otherwise>
				 <![CDATA[
						AND NUM >=1+((#{currentPage} - 1) * 12) 
						AND NUM <=12+((#{currentPage} - 1) * 12)
				]]>
			</otherwise>
		</choose>
    </select>
    
     <select id="selectPostHistoryList" parameterType="map" resultType="hashmap">
       <![CDATA[
         SELECT      /* post.PostMapper.selectPostHistoryList */
           		T.*,
           		(SELECT COUNT(*) FROM xorjf22.people) AS TOTAL_COUNT
		 FROM(
				SELECT  @num:=@num+1 AS NUM,
										'history' as TYPE,
										POST_ID,
								        TITLE,
								        CONTENT,
								        REG_USER_ID,
								        REG_DT,
								        MOD_USER_ID,
								        MOD_DT
				FROM (SELECT @num:=0) AS n,  xorjf22.history a
				WHERE DEL_FLG = 'N'
				ORDER BY POST_ID DESC
			) T
		WHERE 1=1]]>
		<choose>
			<when test='morePostYn!=null and morePostYn.equals("Y")' >
				<![CDATA[
						AND NUM >=1
						AND NUM <=6
				]]>
			</when>
			<otherwise>
				 <![CDATA[
						AND NUM >=1+((#{currentPage} - 1) * 12) 
						AND NUM <=12+((#{currentPage} - 1) * 12)
				]]>
			</otherwise>
		</choose>
    </select>
    
    <select id="selectPostLifeStyleList" parameterType="map" resultType="hashmap">
       <![CDATA[
         SELECT      /* post.PostMapper.selectPostLifeStyleList */
           		T.*,
           		(SELECT COUNT(*) FROM xorjf22.people) AS TOTAL_COUNT
		 FROM(
				SELECT  @num:=@num+1 AS NUM,
										'lifeStyle' as TYPE,
										POST_ID,
								        TITLE,
								        CONTENT,
								        REG_USER_ID,
								        REG_DT,
								        MOD_USER_ID,
								        MOD_DT
				FROM (SELECT @num:=0) AS n,  xorjf22.lifestyle a
				WHERE DEL_FLG = 'N'
				ORDER BY POST_ID DESC
			) T
		WHERE 1=1]]>
		<choose>
			<when test='morePostYn!=null and morePostYn.equals("Y")' >
				<![CDATA[
						AND NUM >=1
						AND NUM <=6
				]]>
			</when>
			<otherwise>
				 <![CDATA[
						AND NUM >=1+((#{currentPage} - 1) * 12) 
						AND NUM <=12+((#{currentPage} - 1) * 12)
				]]>
			</otherwise>
		</choose>
    </select>
    
     <select id="selectPostNatureList" parameterType="map" resultType="hashmap">
       <![CDATA[
         SELECT      /* post.PostMapper.selectPostNatureList */
           		T.*,
           		(SELECT COUNT(*) FROM xorjf22.nature) AS TOTAL_COUNT
		 FROM(
				SELECT  @num:=@num+1 AS NUM,
										'nature' as TYPE,
										POST_ID,
								        TITLE,
								        CONTENT,
								        REG_USER_ID,
								        REG_DT,
								        MOD_USER_ID,
								        MOD_DT
				FROM (SELECT @num:=0) AS n,  xorjf22.nature a
				WHERE DEL_FLG = 'N'
				ORDER BY POST_ID DESC
			) T
		WHERE 1=1]]>
		<choose>
			<when test='morePostYn!=null and morePostYn.equals("Y")' >
				<![CDATA[
						AND NUM >=1
						AND NUM <=6
				]]>
			</when>
			<otherwise>
				 <![CDATA[
						AND NUM >=1+((#{currentPage} - 1) * 12) 
						AND NUM <=12+((#{currentPage} - 1) * 12)
				]]>
			</otherwise>
		</choose>
    </select>
    
    <select id="selectPostPeopleList" parameterType="map" resultType="hashmap">
       <![CDATA[
         SELECT      /* post.PostMapper.selectPostPeopleList */
           		T.*,
           		(SELECT COUNT(*) FROM xorjf22.people) AS TOTAL_COUNT
		 FROM(
				SELECT  @num:=@num+1 AS NUM,
										'people' as TYPE,
										POST_ID,
								        TITLE,
								        CONTENT,
								        REG_USER_ID,
								        REG_DT,
								        MOD_USER_ID,
								        MOD_DT
				FROM (SELECT @num:=0) AS n,  xorjf22.people a
				WHERE DEL_FLG = 'N'
				ORDER BY POST_ID DESC
			) T
		WHERE 1=1]]>
		<choose>
			<when test='morePostYn!=null and morePostYn.equals("Y")' >
				<![CDATA[
						AND NUM >=1
						AND NUM <=6
				]]>
			</when>
			<otherwise>
				 <![CDATA[
						AND NUM >=1+((#{currentPage} - 1) * 12) 
						AND NUM <=12+((#{currentPage} - 1) * 12)
				]]>
			</otherwise>
		</choose>
    </select>
    
    <select id="selectPostAnimalInfo" parameterType="map" resultType="hashmap">
         SELECT      /* post.PostMapper.selectPostAnimalInfo */
            COUNT(*) AS COUNT ,
			POST_ID,
	        TITLE,
	        CONTENT,
	        REG_USER_ID,
	        REG_DT,
	        MOD_USER_ID,
	        MOD_DT
		FROM xorjf22.animals
		WHERE POST_ID = #{postId}
		ORDER BY REG_DT DESC
    </select>
    
    <select id="selectPostArtEntertainmentInfo" parameterType="map" resultType="hashmap">
         SELECT      /* post.PostMapper.selectPostartentertainmentInfo */
            COUNT(*) AS COUNT ,
			POST_ID,
	        TITLE,
	        CONTENT,
	        REG_USER_ID,
	        REG_DT,
	        MOD_USER_ID,
	        MOD_DT
		FROM xorjf22.artentertainment
		WHERE POST_ID = #{postId}
		ORDER BY REG_DT DESC
    </select>
    
    <select id="selectPostDestinationsInfo" parameterType="map" resultType="hashmap">
         SELECT      /* post.PostMapper.selectPostDestinationsInfo */
            COUNT(*) AS COUNT ,
			POST_ID,
	        TITLE,
	        CONTENT,
	        REG_USER_ID,
	        REG_DT,
	        MOD_USER_ID,
	        MOD_DT
		FROM xorjf22.destinations
		WHERE POST_ID = #{postId}
		ORDER BY REG_DT DESC
    </select>
    
    <select id="selectPostHistoryInfo" parameterType="map" resultType="hashmap">
         SELECT      /* post.PostMapper.selectPostHistoryInfo */
            COUNT(*) AS COUNT ,
			POST_ID,
	        TITLE,
	        CONTENT,
	        REG_USER_ID,
	        REG_DT,
	        MOD_USER_ID,
	        MOD_DT
		FROM xorjf22.history
		WHERE POST_ID = #{postId}
		ORDER BY REG_DT DESC
    </select>
    
    <select id="selectPostLifeStyleInfo" parameterType="map" resultType="hashmap">
         SELECT      /* post.PostMapper.selectPostLifeStyleInfo */
            COUNT(*) AS COUNT ,
			POST_ID,
	        TITLE,
	        CONTENT,
	        REG_USER_ID,
	        REG_DT,
	        MOD_USER_ID,
	        MOD_DT
		FROM xorjf22.lifestyle
		WHERE POST_ID = #{postId}
		ORDER BY REG_DT DESC
    </select>
    
    <select id="selectPostNatureInfo" parameterType="map" resultType="hashmap">
         SELECT      /* post.PostMapper.selectPostNatureInfo */
            COUNT(*) AS COUNT ,
			POST_ID,
	        TITLE,
	        CONTENT,
	        REG_USER_ID,
	        REG_DT,
	        MOD_USER_ID,
	        MOD_DT
		FROM xorjf22.nature
		WHERE POST_ID = #{postId}
		ORDER BY REG_DT DESC
    </select>
    
    <select id="selectPostPeopleInfo" parameterType="map" resultType="hashmap">
         SELECT      /* post.PostMapper.selectPostPeopleInfo */
            COUNT(*) AS COUNT ,
			POST_ID,
	        TITLE,
	        CONTENT,
	        REG_USER_ID,
	        REG_DT,
	        MOD_USER_ID,
	        MOD_DT
		FROM xorjf22.people
		WHERE POST_ID = #{postId}
		ORDER BY REG_DT DESC
    </select>
   
    <select id="selectPostAttachList"  parameterType="map" resultType="map">
         SELECT      /* post.PostMapper.selectPostAttachList */
          	ATTACH_ID,
			POST_ID,
			POST_TYPE,
			TITLE_YN,
	        ATTACH_TYPE,
	        ATTACH_DIR,
	        URL_PATH,
	        FILE_ORIGIN_NM,
	        FILE_STORE_NM,
	        TITLE_YN,
	        DEL_YN,
	        REG_USER_ID,
	        REG_DT,
	        MOD_USER_ID,
	        MOD_DT
	FROM xorjf22.magagine_attach
	WHERE POST_ID = #{postId}
	AND POST_TYPE =#{postType}
	AND DEL_YN ='N'
	ORDER BY ATTACH_ID
    </select>
    
    <update  id="deletePostAttachList" parameterType="map"  >
    UPDATE	/* post.PostMapper.deletePostAttachList */
    		xorjf22.magagine_attach
    SET  REFFER_FLG = 'N' , MOD_DT = SYSDATE()
    WHERE POST_ID IN (SELECT POST_ID FROM  xorjf22.animals WHERE  DEL_FLG='Y' AND POST_ID = #{postId})
    AND POST_TYPE =#{postType}
    </update>
    
    <update  id="deleteAnimals" parameterType="map"  >
    	UPDATE		/* post.PostMapper.deleteAnimals */
    			xorjf22.animals
    	SET DEL_FLG = 'Y', MOD_DT = SYSDATE()
    	WHERE POST_ID = #{postId}
    	
    </update>
    
    <update  id="deleteartentertainment" parameterType="map"  >
    	UPDATE		/* post.PostMapper.deleteAnimals */
    			xorjf22.artentertainment
    	SET DEL_FLG = 'Y', MOD_DT = SYSDATE()
    	WHERE POST_ID = #{postId}
    </update>
    
    <update  id="deleteDestinations" parameterType="map"  >
    	UPDATE		/* post.PostMapper.deleteDestinations */
    			xorjf22.destinations
    	SET DEL_FLG = 'Y', MOD_DT = SYSDATE()
    	WHERE POST_ID = #{postId}
    </update>
    
    <update  id="deleteHistory" parameterType="map"  >
    	UPDATE		/* post.PostMapper.deleteDestinations */
    			xorjf22.history
    	SET DEL_FLG = 'Y', MOD_DT = SYSDATE()
    	WHERE POST_ID = #{postId}
    </update>
    
    <update  id="deleteLifeStyle" parameterType="map"  >
    	UPDATE		/* post.PostMapper.deleteLifeStyle */
    			xorjf22.lifestyle
    	SET DEL_FLG = 'Y', MOD_DT = SYSDATE()
    	WHERE POST_ID = #{postId}
    </update>
    
    <update  id="deleteNature" parameterType="map"  >
    	UPDATE		/* post.PostMapper.deleteLifeStyle */
    			xorjf22.nature
    	SET DEL_FLG = 'Y', MOD_DT = SYSDATE()
    	WHERE POST_ID = #{postId}
    </update>
    
    <update  id="deletePeople" parameterType="map"  >
    	UPDATE		/* post.PostMapper.deletePeople */
    			xorjf22.people
    	SET DEL_FLG = 'Y', MOD_DT = SYSDATE()
    	WHERE POST_ID = #{postId}
    </update>
    
     <update  id="updatePostPickAnimals" parameterType="map"  >
    	UPDATE		/* post.PostMapper.updatePostPickAnimals */
    			xorjf22.animals
    	SET POST_PICK = 'Y' , MOD_DT = SYSDATE()
    	WHERE POST_ID = #{postId}
    </update>
    
    <update  id="updatePostPickArtEntertainment" parameterType="map"  >
    	UPDATE		/* post.PostMapper.updatePostPickartentertainment */
    			xorjf22.artentertainment
    	SET POST_PICK = 'Y' , MOD_DT = SYSDATE()
    	WHERE POST_ID = #{postId}
    </update>
    
    <update  id="updatePostPickDestinations" parameterType="map"  >
    	UPDATE		/* post.PostMapper.updatePostPickDestinations */
    			xorjf22.destinations
    	SET POST_PICK = 'Y' , MOD_DT = SYSDATE()
    	WHERE POST_ID = #{postId}
    </update>
    
    <update  id="updatePostPickHistory" parameterType="map"  >
    	UPDATE		/* post.PostMapper.updatePostPickHistory */
    			xorjf22.history
    	SET POST_PICK = 'Y' , MOD_DT = SYSDATE()
    	WHERE POST_ID = #{postId}
    </update>
    
    <update  id="updatePostPickLifeStyle" parameterType="map"  >
    	UPDATE		/* post.PostMapper.updatePostPickLifeStyle */
    			xorjf22.lifestyle
    	SET POST_PICK = 'Y' , MOD_DT = SYSDATE()
    	WHERE POST_ID = #{postId}
    </update>
    
    <update  id="updatePostPickNature" parameterType="map"  >
    	UPDATE		/* post.PostMapper.updatePostPickNature */
    			xorjf22.nature
    	SET POST_PICK = 'Y' , MOD_DT = SYSDATE()
    	WHERE POST_ID = #{postId}
    </update>
    
    <update  id="updatePostPickPeople" parameterType="map"  >
    	UPDATE		/* post.PostMapper.updatePostPickPeople */
    			xorjf22.people
    	SET POST_PICK = 'Y' , MOD_DT = SYSDATE()
    	WHERE POST_ID = #{postId}
    </update>
</mapper>